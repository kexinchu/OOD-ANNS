## build_hnsw_bottom
NSW Bottom Layer Information:
current number of elements: 10000000
max number of elements: 10000000
Average out-degree: 22.1628
Average Capacity: 23.5936
entry point: 7596402


## 使用10M train.gt.bin 数据来run NGFix
NGFix latency: 3925678 ms.

HNSW_NGFix Information:
current number of elements: 10000000
max number of elements: 10000000
Average out-degree: 43.2198
Average Capacity: 45.94
entry point: 7596402


## 测试query
### 测试 NGFix

| efsearch | Avg Recall | Avg Latency (ms) | Avg Dist Comp | Rel Dist Error |
|---------|-------------|------------------|----------------|----------------|
| 100  | 0.921263 | 0.77329  | 3859.79  | 1.00156 |
| 110  | 0.928603 | 0.830135 | 4138.88  | 1.00139 |
| 120  | 0.934437 | 0.891111 | 4413.64  | 1.00124 |
| 130  | 0.939477 | 0.947777 | 4683.05  | 1.00114 |
| 140  | 0.944358 | 1.00435  | 4950.14  | 1.00100 |
| 150  | 0.948276 | 1.06108  | 5213.15  | 1.00093 |
| 160  | 0.951604 | 1.11641  | 5471.80  | 1.00086 |
| 180  | 0.957373 | 1.22397  | 5981.38  | 1.00074 |
| 200  | 0.962216 | 1.33281  | 6481.60  | 1.00064 |
| 250  | 0.970746 | 1.59444  | 7689.07  | 1.00047 |
| 300  | 0.976473 | 1.85071  | 8853.47  | 1.00037 |
| 400  | 0.983018 | 2.34024  | 11066.8  | 1.00027 |
| 500  | 0.986799 | 2.82274  | 13173.2  | 1.00021 |
| 800  | 0.992991 | 4.18098  | 19061.2  | 1.00010 |
| 1000 | 0.994931 | 5.04709  | 22742.1  | 1.00007 |
| 2000 | 0.998172 | 9.13381  | 39460.8  | 1.00003 |


### No NGFix

| efsearch | Avg Recall | Avg Latency (ms) | Avg Dist Comp | Rel Dist Error |
|---------|-------------|------------------|----------------|----------------|
| 100  | 0.747069 | 0.451916 | 1990.89  | 1.00999 |
| 110  | 0.763099 | 0.484208 | 2134.20  | 1.00917 |
| 120  | 0.777162 | 0.522631 | 2275.19  | 1.00858 |
| 130  | 0.790019 | 0.552623 | 2414.96  | 1.00806 |
| 140  | 0.801367 | 0.588119 | 2553.05  | 1.00754 |
| 150  | 0.811596 | 0.618754 | 2689.24  | 1.00697 |
| 160  | 0.819888 | 0.646518 | 2822.11  | 1.00670 |
| 180  | 0.835488 | 0.714049 | 3087.69  | 1.00602 |
| 200  | 0.848942 | 0.775661 | 3348.47  | 1.00551 |
| 250  | 0.874541 | 0.930253 | 3985.04  | 1.00436 |
| 300  | 0.892377 | 1.07705  | 4599.48  | 1.00372 |
| 400  | 0.916055 | 1.37013  | 5782.17  | 1.00294 |
| 500  | 0.931871 | 1.66299  | 6922.56  | 1.00238 |
| 800  | 0.956995 | 2.49776  | 10153.3  | 1.00142 |
| 1000 | 0.966165 | 3.01628  | 12203.7  | 1.00101 |
| 2000 | 0.984961 | 5.57234  | 21714.7  | 1.00047 |

## 测试insertion
HNSW Bottom Layer construction latency: 536231 ms.

HNSW Bottom Layer Information:
current number of elements: 8000000
max number of elements: 8000000
Average out-degree: 22.146
Average Capacity: 23.5779
entry point: 7596402

============
NGFix latency: 4062099 ms.

HNSW_NGFix Information:
current number of elements: 8000000
max number of elements: 8000000
Average out-degree: 45.4967
Average Capacity: 48.1672
entry point: 7596402

============
Insertion 2M latency: 289585 ms.

Index (after insertion) Information:
current number of elements: 10000000
max number of elements: 10000000
Average out-degree: 40.7441
Average Capacity: 43.5571
entry point: 7596402

| efsearch | Avg Recall | Avg Latency (ms) | Avg Dist Comp | Rel Dist Error |
|---------|-------------|------------------|----------------|----------------|
| 100  | 0.909682 | 0.751905 | 3744.45  | 1.00179 |
| 110  | 0.917609 | 0.807105 | 4012.95  | 1.00162 |
| 120  | 0.924524 | 0.864993 | 4276.91  | 1.00145 |
| 130  | 0.930648 | 0.920540 | 4538.36  | 1.00132 |
| 140  | 0.935584 | 0.972919 | 4795.56  | 1.00122 |
| 150  | 0.939884 | 1.029290 | 5048.49  | 1.00114 |
| 160  | 0.943780 | 1.083310 | 5299.68  | 1.00105 |
| 180  | 0.950601 | 1.187120 | 5793.94  | 1.00089 |
| 200  | 0.955851 | 1.290690 | 6275.44  | 1.00078 |
| 250  | 0.965758 | 1.543680 | 7445.95  | 1.00059 |
| 300  | 0.972282 | 1.789340 | 8568.14  | 1.00046 |
| 400  | 0.980224 | 2.269030 | 10716.30 | 1.00031 |
| 500  | 0.985055 | 2.737230 | 12762.10 | 1.00023 |
| 800  | 0.992156 | 4.056160 | 18472.60 | 1.00010 |
| 1000 | 0.994219 | 4.885890 | 22043.10 | 1.00007 |
| 2000 | 0.998038 | 8.852310 | 38299.50 | 1.00002 |


L_pq            QPS             avg_visited     mean_latency    recall@10       avg_hops
100             14792.9         3491.35         0.0676          0.94517         108.544
110             12484.4         3749.59         0.0801          0.94998         118.498
120             12285           4005.54         0.0814          0.95402         128.476
130             13642.6         4255.51         0.0733          0.95741         138.406
140             11481.1         4504.02         0.0871          0.96014         148.362
150             10559.7         4749.69         0.0947          0.96283         158.338
160             11312.2         4991.67         0.0884          0.96478         168.319
180             10582           5470.49         0.0945          0.96879         188.314
200             9250.69         5938.48         0.1081          0.9717          208.218
220             8896.8          6398.66         0.1124          0.97437         228.189
240             7385.52         6853.61         0.1354          0.97646         248.18
260             6997.9          7301.2          0.1429          0.97854         268.203
280             6618.13         7743.94         0.1511          0.98042         288.202
300             6868.13         8179.94         0.1456          0.98208         308.243
400             5249.34         10278.9         0.1905          0.98662         407.948
500             4518.75         12293.4         0.2213          0.99022         507.937
800             3044.14         17946.6         0.3285          0.99471         807.633
1000            2510.67         21490.3         0.3983          0.99609         1007.28
2000            1343.18         37719.4         0.7445          0.99858         2006


## 测试deletion - from NGFix-Graph, delete 20% nodes
Deletion latency: 279919 ms.

Index (after deletion) Information:
current number of elements: 8000000
max number of elements: 10000000
Average out-degree: 37.9563
Average Capacity: 40.9377
entry point: 7596402

| efsearch | Avg Recall | Avg Latency (ms) | Avg Dist Comp | Rel Dist Error |
|---------|-------------|------------------|----------------|----------------|
| 100  | 0.735449 | 0.67920  | 3361.51  | 1.00761 |
| 110  | 0.741513 | 0.73043  | 3605.17  | 1.00739 |
| 120  | 0.746277 | 0.77945  | 3842.76  | 1.00725 |
| 130  | 0.750493 | 0.82954  | 4077.99  | 1.00712 |
| 140  | 0.754260 | 0.87912  | 4310.15  | 1.00699 |
| 150  | 0.757493 | 0.92816  | 4540.25  | 1.00690 |
| 160  | 0.760335 | 0.97696  | 4765.58  | 1.00681 |
| 180  | 0.765141 | 1.07307  | 5211.58  | 1.00666 |
| 200  | 0.768948 | 1.16524  | 5646.70  | 1.00654 |
| 250  | 0.775972 | 1.39180  | 6706.80  | 1.00634 |
| 300  | 0.780206 | 1.61639  | 7720.92  | 1.00624 |
| 400  | 0.785680 | 2.05013  | 9666.99  | 1.00611 |
| 500  | 0.789028 | 2.47414  | 11520.2  | 1.00602 |
| 800  | 0.794222 | 3.67562  | 16731.1  | 1.00587 |
| 1000 | 0.795815 | 4.44069  | 19990.3  | 1.00584 |
| 2000 | 0.798569 | 8.08763  | 34883.2  | 1.00578 |

